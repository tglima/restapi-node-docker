{
   "openapi":"3.1.0",
   "info":{
      "title":"Rest API",
      "description":"{{SWAGGER_INFO_DESCRIPTION}}",
      "version":"{{SWAGGER_INFO_VERSION}}",
      "contact":{
         "name":"API Support",
         "url":"https://github.com/tglima/restapi-node-docker"
      },
      "license":{
         "name":"MIT",
         "url":"https://raw.githubusercontent.com/tglima/restapi-node-docker/main/LICENSE"
      }
   },
   "servers":[
      {
         "url":"/v{{NU_VERSION}}",
         "description":"{{SWAGGER_SERVERS_DESCRIPTION}}"
      }
   ],
   "paths":{
      "/products/find":{
         "get":{
            "summary":"Busca todos produtos disponíveis",
            "description":"Rota para obter todos os produtos disponíveis",
            "tags":[
               "Product"
            ],
            "security":[
               {
                  "ApiKeyAuth":[

                  ]
               }
            ],
            "responses":{
               "200":{
                  "description":"Produtos encontrados",
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/ProductsArray"
                        }
                     }
                  }
               },
               "401":{
                  "description":"Falha na autenticação",
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/DefApiResponse"
                        },
                        "examples":{
                           "unauthorized":{
                              "$ref":"#/components/examples/unauthorized"
                           }
                        }
                     }
                  }
               },
               "400":{
                  "description":"Ocorreu uma falha/erro na sua requisição. Reveja os dados enviados e tente novamente!",
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/DefApiResponse"
                        },
                        "examples":{
                           "invalidRequest":{
                              "$ref":"#/components/examples/invalidRequest"
                           }
                        }
                     }
                  }
               }
            }
         }
      },
      "/products/find?id={id}":{
         "get":{
            "summary":"Busca o produto pelo ID",
            "description":"Rota para obter o produto de acordo com o seu id",
            "tags":[
               "Product"
            ],
            "security":[
               {
                  "ApiKeyAuth":[

                  ]
               }
            ],
            "parameters":[
               {
                  "name":"id",
                  "in":"path",
                  "required":true,
                  "description":"Id do produto a ser pesquisado",
                  "schema":{
                     "type":"integer",
                     "format":"int32"
                  }
               }
            ],
            "responses":{
               "200":{
                  "description":"Produto encontrado",
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/Product"
                        }
                     }
                  }
               },
               "400":{
                  "description":"Ocorreu uma falha/erro na sua requisição. Reveja os dados enviados e tente novamente!",
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/DefApiResponse"
                        },
                        "examples":{
                           "invalidRequest":{
                              "$ref":"#/components/examples/invalidRequest"
                           }
                        }
                     }
                  }
               },
               "401":{
                  "description":"Falha na autenticação",
                  "content":{
                     "application/json":{
                        "schema":{
                           "$ref":"#/components/schemas/DefApiResponse"
                        },
                        "examples":{
                           "unauthorized":{
                              "$ref":"#/components/examples/unauthorized"
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   },
   "components":{
      "schemas":{
         "DefApiResponse":{
            "type":"object",
            "properties":{
               "code_event": {
                  "type": "string"
                },
               "messages":{
                  "type":"array",
                  "items":{
                     "type":"string"
                  }
               }
            }
         },
         "Product":{
            "type":"object",
            "properties":{
               "id_product":{
                  "type":"integer",
                  "example":1
               },
               "nm_product":{
                  "type":"string",
                  "example":"Basic"
               },
               "vl_month_price":{
                  "type":"number",
                  "example":14.99
               },
               "nm_videoQuality":{
                  "type":"string",
                  "example":"Good"
               },
               "nm_resolution":{
                  "type":"string",
                  "example":"480p"
               },
               "qt_simultaneous_screens":{
                  "type":"number",
                  "example":1
               }
            }
         },
         "ProductsArray":{
            "type":"object",
            "properties":{
               "products":{
                  "type":"array",
                  "items":{
                     "$ref":"#/components/schemas/Product"
                  }
               }
            }
         }
      },
      "examples":{
         "authFailed":{
            "value":{
              "code_event": "b000b00a-ab00-0000-b000-bb000b000000",
               "messages":[
                  "Credenciais inválidas ou ausentes"
               ]
            }
         },
         "invalidRequest":{
            "value":{
              "code_event": "b000b00a-ab00-0000-b000-bb000b000000",
               "messages":[
                  "Ocorreu uma falha/erro na sua requisição. Reveja os dados enviados e tente novamente!"
               ]
            }
         },
         "notFound":{
            "value":{
              "code_event": "b000b00a-ab00-0000-b000-bb000b000000",
               "messages":[
                  "Item não encontrado!"
               ]
            }
         },
         "regSuccess":{
            "value":{
               "messages":[
                  "Registrado com sucesso!!"
               ]
            }
         },
         "serverError":{
            "value":{
              "code_event": "b000b00a-ab00-0000-b000-bb000b000000",
               "messages":[
                  "Erro interno no servidor!"
               ]
            }
         },
         "unauthorized":{
            "value":{
              "code_event": "b000b00a-ab00-0000-b000-bb000b000000",
               "messages":[
                  "Credenciais inválidas ou ausentes!"
               ]
            }
         }
      },
      "securitySchemes":{
         "ApiKeyAuth":{
            "type":"apiKey",
            "in":"header",
            "name":"API-KEY"
         }
      }
   }
}
